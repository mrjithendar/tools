export VAULT_ADDR='http://127.0.0.1:8200'
vault operator init # to get the 5 vault login tokens along with root token
vault operator unseal # enter any 3 vault login token from 5 tokens
vault login rootToken
vault auth enable approle # enable the approle credential for machine to machine communication

vault write auth/approle/role/jenkins_role token_num_uses=0 secret_id_num_uses=0 policies="jenkins" # create approle auth token

# get the role id and role secret to authenticate in jenkins configuration
vault read auth/approle/role/jenkins-role/role-id 
vault write -f auth/approle/role/jenkins-role/secret-id

# enable the secrets with path and key value
vault secrets enable -path=secrets kv

# create a test username & password credential with key username and value password, these are the default key values.
vault write secrets/creds/testcredentials username=yourusernamehere password=yourpasswordhere

# create a test secret credentials with secret value, secret is the default key.
vault write secrets/creds/testsecret secret=yoursecrethere


vim jenkins_policy.hcl # below is the example config this can read and list all credetials from the given path
path "secrets/creds/*" {
    capabilities  = ["read", "list"]
}

vault policy write jenkins jenkins_policy.hcl