pipeline {
    agent any

    options {
        disableConcurrentBuilds()
    }

    stages {
        stage('VAULT TEST') {
            steps {
                withCredentials([[$class: 'VaultUsernamePasswordCredentialBinding', credentialsId: 'testcredentials', passwordVariable: 'PASSWORD', usernameVariable: 'USERNAME'], vaultString(credentialsId: 'testsecret', variable: 'secret')]) {
                    sh "echo $PASSWORD"
                    sh "echo $USERNAME"
                    sh "echo $secret"
                }
            }
        }
    } 
}